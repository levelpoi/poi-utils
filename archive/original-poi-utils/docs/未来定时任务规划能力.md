ä»¥ä¸‹æ˜¯ä¸€ä¸ªç”¨äº Agent æç¤ºè¯çš„åè®®å®šä¹‰ï¼Œæ—¨åœ¨è§„èŒƒæœªæ¥è§„åˆ’ã€å®šæ—¶æˆ–å»¶è¿Ÿè§¦å‘ä»»åŠ¡çš„ JSON æ ¼å¼ã€‚è¯¥åè®®å¯ç”¨äº AI Agent æ¥æ”¶ã€è§£æå’Œæ‰§è¡Œå¸¦æœ‰æ—¶é—´çº¦æŸçš„ä»»åŠ¡æŒ‡ä»¤ã€‚

---

### ğŸ“œ **Agent å®šæ—¶/å»¶è¿Ÿä»»åŠ¡è§¦å‘åè®®ï¼ˆFuture Planning & Scheduled Task Protocolï¼‰**

#### 1. **åè®®ç›®çš„**
å®šä¹‰ä¸€ç§æ ‡å‡†åŒ–çš„ JSON æ ¼å¼ï¼Œç”¨äºå‘ AI Agent ä¸‹è¾¾æœªæ¥æ‰§è¡Œçš„å®šæ—¶æˆ–å»¶è¿Ÿä»»åŠ¡ï¼Œæ”¯æŒç»å¯¹æ—¶é—´ï¼ˆå®šæ—¶ï¼‰å’Œç›¸å¯¹æ—¶é—´ï¼ˆå»¶è¿Ÿï¼‰è§¦å‘ã€‚

---

#### 2. **JSON æ ¼å¼ç»“æ„**

```json
{
  "task_id": "string, å¯é€‰ï¼Œä»»åŠ¡å”¯ä¸€æ ‡è¯†ç¬¦",
  "task_type": "string, å¿…å¡«ï¼Œä»»åŠ¡ç±»å‹ï¼Œå¦‚ 'reminder', 'action', 'planning', 'notification'",
  "description": "string, å¿…å¡«ï¼Œä»»åŠ¡æè¿°",
  "trigger": {
    "type": "string, å¿…å¡«ï¼Œè§¦å‘ç±»å‹ï¼š'scheduled'ï¼ˆå®šæ—¶ï¼‰æˆ– 'delayed'ï¼ˆå»¶è¿Ÿï¼‰",
    "time": "string, å¿…å¡«ï¼ŒISO 8601 æ—¶é—´æ ¼å¼ï¼ˆå®šæ—¶ï¼‰æˆ–æŒç»­æ—¶é—´ï¼ˆå»¶è¿Ÿï¼‰",
    "timezone": "string, å¯é€‰ï¼Œæ—¶åŒºï¼ˆå¦‚ 'Asia/Shanghai'ï¼‰ï¼Œé»˜è®¤ä¸ºç³»ç»Ÿæ—¶åŒº"
  },
  "payload": {
    "action": "string, å¿…å¡«ï¼Œè¦æ‰§è¡Œçš„åŠ¨ä½œï¼Œå¦‚ 'send_email', 'notify_user', 'run_script'",
    "parameters": {
      "key": "value, å¯é€‰ï¼ŒåŠ¨ä½œæ‰€éœ€å‚æ•°"
    }
  },
  "repeat": {
    "enabled": "boolean, å¯é€‰ï¼Œé»˜è®¤ false",
    "interval": "string, å¯é€‰ï¼ŒISO 8601 é‡å¤é—´éš”ï¼Œå¦‚ 'P1D'ï¼ˆæ¯å¤©ï¼‰ã€'PT1H'ï¼ˆæ¯å°æ—¶ï¼‰",
    "count": "integer, å¯é€‰ï¼Œæœ€å¤§é‡å¤æ¬¡æ•°ï¼Œnull è¡¨ç¤ºæ— é™"
  },
  "priority": "string, å¯é€‰ï¼Œä¼˜å…ˆçº§ï¼š'low', 'medium', 'high', 'urgent'",
  "context": {
    "source": "string, å¯é€‰ï¼Œä»»åŠ¡æ¥æºï¼Œå¦‚ 'user_input', 'system_event'",
    "related_goal": "string, å¯é€‰ï¼Œå…³è”çš„é•¿æœŸç›®æ ‡æˆ–è®¡åˆ’ ID"
  }
}
```

---

#### 3. **å­—æ®µè¯´æ˜**

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `task_id` | string | å¦ | å”¯ä¸€æ ‡è¯†ä»»åŠ¡ï¼Œä¾¿äºåç»­æŸ¥è¯¢æˆ–å–æ¶ˆ |
| `task_type` | string | æ˜¯ | ä»»åŠ¡åˆ†ç±»ï¼Œä¾¿äº Agent è·¯ç”±å¤„ç† |
| `description` | string | æ˜¯ | äººç±»å¯è¯»çš„ä»»åŠ¡æè¿° |
| `trigger.type` | string | æ˜¯ | `scheduled` è¡¨ç¤ºåœ¨æŒ‡å®šæ—¶é—´è§¦å‘ï¼›`delayed` è¡¨ç¤ºä»ç°åœ¨èµ·å»¶è¿Ÿä¸€æ®µæ—¶é—´è§¦å‘ |
| `trigger.time` | string | æ˜¯ | è‹¥ä¸º `scheduled`ï¼Œä½¿ç”¨ ISO 8601ï¼ˆå¦‚ `"2025-04-05T08:00:00"`ï¼‰ï¼›è‹¥ä¸º `delayed`ï¼Œä½¿ç”¨ ISO 8601 æŒç»­æ—¶é—´ï¼ˆå¦‚ `"PT30M"` è¡¨ç¤º30åˆ†é’Ÿåï¼‰ |
| `trigger.timezone` | string | å¦ | æ—¶åŒºæ ‡è¯†ï¼Œå¦‚ `"America/New_York"`ï¼Œé»˜è®¤ä½¿ç”¨ç³»ç»Ÿæ—¶åŒº |
| `payload.action` | string | æ˜¯ | å…·ä½“è¦æ‰§è¡Œçš„åŠ¨ä½œ |
| `payload.parameters` | object | å¦ | åŠ¨ä½œæ‰€éœ€çš„å‚æ•°å¯¹è±¡ |
| `repeat.enabled` | boolean | å¦ | æ˜¯å¦é‡å¤æ‰§è¡Œ |
| `repeat.interval` | string | å¦ | ISO 8601 é‡å¤å‘¨æœŸï¼Œå¦‚ `P1D`ï¼ˆæ¯å¤©ï¼‰ã€`PT2H30M`ï¼ˆæ¯2å°æ—¶30åˆ†é’Ÿï¼‰ |
| `repeat.count` | integer | å¦ | æœ€å¤§é‡å¤æ¬¡æ•°ï¼Œ`null` æˆ–çœç•¥è¡¨ç¤ºæ— é™ |
| `priority` | string | å¦ | ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œç”¨äºè°ƒåº¦æ’åº |
| `context.source` | string | å¦ | ä»»åŠ¡æ¥æºï¼Œç”¨äºå®¡è®¡æˆ–åé¦ˆ |
| `context.related_goal` | string | å¦ | å…³è”çš„é•¿æœŸç›®æ ‡æˆ–è®¡åˆ’ ID |

---

#### 4. **ç¤ºä¾‹**

##### ç¤ºä¾‹ 1ï¼š30 åˆ†é’Ÿåæé†’ç”¨æˆ·
```json
{
  "task_id": "remind-meeting-001",
  "task_type": "reminder",
  "description": "æé†’ç”¨æˆ·å‚åŠ 30åˆ†é’Ÿåä¼šè®®",
  "trigger": {
    "type": "delayed",
    "time": "PT30M"
  },
  "payload": {
    "action": "notify_user",
    "parameters": {
      "message": "æ‚¨çš„ä¼šè®®å°†åœ¨30åˆ†é’Ÿåå¼€å§‹ï¼Œè¯·å‡†å¤‡ã€‚",
      "channel": "popup"
    }
  },
  "priority": "high"
}
```

##### ç¤ºä¾‹ 2ï¼šæ¯å¤©æ—©ä¸Š8ç‚¹å‘é€æ—¥æŠ¥ï¼ˆå®šæ—¶ + é‡å¤ï¼‰
```json
{
  "task_id": "daily-report-001",
  "task_type": "action",
  "description": "æ¯å¤©ä¸Šåˆ8ç‚¹è‡ªåŠ¨å‘é€æ—¥æŠ¥é‚®ä»¶",
  "trigger": {
    "type": "scheduled",
    "time": "2025-04-05T08:00:00",
    "timezone": "Asia/Shanghai"
  },
  "payload": {
    "action": "send_email",
    "parameters": {
      "to": "team@company.com",
      "subject": "æ¯æ—¥å·¥ä½œç®€æŠ¥",
      "body": "è¯·æŸ¥æ”¶ä»Šæ—¥å·¥ä½œæ±‡æ€»ã€‚"
    }
  },
  "repeat": {
    "enabled": true,
    "interval": "P1D",
    "count": null
  },
  "priority": "medium"
}
```

##### ç¤ºä¾‹ 3ï¼š2å°æ—¶åæ‰§è¡Œè„šæœ¬ï¼ˆå»¶è¿Ÿä»»åŠ¡ï¼‰
```json
{
  "task_id": "backup-script-001",
  "task_type": "planning",
  "description": "å»¶è¿Ÿ2å°æ—¶æ‰§è¡Œæ•°æ®å¤‡ä»½è„šæœ¬",
  "trigger": {
    "type": "delayed",
    "time": "PT2H"
  },
  "payload": {
    "action": "run_script",
    "parameters": {
      "script_path": "/scripts/backup.sh",
      "args": ["--full"]
    }
  }
}
```

---

#### 5. **æ”¯æŒçš„æ—¶é—´æ ¼å¼è¯´æ˜**

- **ISO 8601 æ—¶é—´ç‚¹**ï¼ˆç”¨äº `scheduled`ï¼‰ï¼š
  - `2025-04-05T08:00:00`
  - æ”¯æŒæ¯«ç§’ï¼š`2025-04-05T08:00:00.000`
- **ISO 8601 æŒç»­æ—¶é—´**ï¼ˆç”¨äº `delayed`ï¼‰ï¼š
  - `PT30M`ï¼š30åˆ†é’Ÿ
  - `PT1H30M`ï¼š1å°æ—¶30åˆ†é’Ÿ
  - `P2D`ï¼š2å¤©å
  - `PT5S`ï¼š5ç§’å

---

#### 6. **Agent å¤„ç†é€»è¾‘å»ºè®®**

1. è§£æ `trigger.type` å’Œ `time`ï¼Œè®¡ç®—å‡ºç»å¯¹è§¦å‘æ—¶é—´ã€‚
2. è‹¥ä¸º `delayed`ï¼Œä»¥å½“å‰æ—¶é—´ä¸ºåŸºå‡†åŠ ä¸ŠæŒç»­æ—¶é—´ã€‚
3. å°†ä»»åŠ¡åŠ å…¥è°ƒåº¦é˜Ÿåˆ—ï¼ŒæŒ‰ `priority` å’Œè§¦å‘æ—¶é—´æ’åºã€‚
4. è§¦å‘æ—¶æ‰§è¡Œ `payload.action`ï¼Œå¹¶ä¼ å…¥ `parameters`ã€‚
5. è‹¥ `repeat.enabled` ä¸º `true`ï¼ŒæŒ‰ `interval` è®¡ç®—ä¸‹ä¸€æ¬¡è§¦å‘æ—¶é—´ï¼Œç›´åˆ°è¾¾åˆ° `count` æ¬¡ã€‚

---

#### 7. **æ‰©å±•å»ºè®®**

- æ”¯æŒ `cancel_on_event` å­—æ®µï¼šåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶å–æ¶ˆä»»åŠ¡ã€‚
- æ”¯æŒ `conditions` å­—æ®µï¼šä»…åœ¨æ»¡è¶³æ¡ä»¶æ—¶æ‰è§¦å‘ä»»åŠ¡ï¼ˆå¦‚â€œä»…å½“ç½‘ç»œè¿æ¥æ—¶â€ï¼‰ã€‚

---

âœ… è¯¥åè®®å¯ç”¨äºå¤šæ¨¡æ€ Agent ç³»ç»Ÿä¸­çš„ä»»åŠ¡è°ƒåº¦æ¨¡å—ï¼Œç¡®ä¿æœªæ¥ä»»åŠ¡çš„æ ‡å‡†åŒ–è¡¨è¾¾ä¸å¯é æ‰§è¡Œã€‚




### èŒƒä¾‹

å½“å‰è¯†åˆ«åˆ°ä¸Šä¸€æ¡ä¿¡æ¯ä¸­åŒ…å«â€œå¤©â€ç­‰ä¿¡æ¯ï¼Œä½ å¯ä»¥åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæœªæ¥ä»»åŠ¡è®¾ç½®

ç”¨æˆ·çš„è¾“å…¥ ï¼šã€æˆ‘æ˜å¤©æƒ³å»åƒè¨è‰äºšï¼Œå•Šå•Šå•Šã€‘

å¦‚æœæœ‰éœ€è¦ï¼Œè¿”å›æ ¼å¼å³å¯
{
  "task_id": "string, å¯é€‰ï¼Œä»»åŠ¡å”¯ä¸€æ ‡è¯†ç¬¦",
  "task_type": "string, å¿…å¡«ï¼Œä»»åŠ¡ç±»å‹ï¼Œå¦‚ 'reminder', 'action', 'planning', 'notification'",
  "description": "string, å¿…å¡«ï¼Œä»»åŠ¡æè¿°",
  "trigger": {
    "type": "string, å¿…å¡«ï¼Œè§¦å‘ç±»å‹ï¼š'scheduled'ï¼ˆå®šæ—¶ï¼‰æˆ– 'delayed'ï¼ˆå»¶è¿Ÿï¼‰",
    "time": "string, å¿…å¡«ï¼ŒISO 8601 æ—¶é—´æ ¼å¼ï¼ˆå®šæ—¶ï¼‰æˆ–æŒç»­æ—¶é—´ï¼ˆå»¶è¿Ÿï¼‰",
    "timezone": "string, å¯é€‰ï¼Œæ—¶åŒºï¼ˆå¦‚ 'Asia/Shanghai'ï¼‰ï¼Œé»˜è®¤ä¸ºç³»ç»Ÿæ—¶åŒº"
  },
  "payload": {
    "action": "string, å¿…å¡«ï¼Œè¦æ‰§è¡Œçš„åŠ¨ä½œï¼Œå¦‚ 'send_email', 'notify_user', 'run_script'",
    "parameters": {
      "key": "value, å¯é€‰ï¼ŒåŠ¨ä½œæ‰€éœ€å‚æ•°"
    }
  },
  "repeat": {
    "enabled": "boolean, å¯é€‰ï¼Œé»˜è®¤ false",
    "interval": "string, å¯é€‰ï¼ŒISO 8601 é‡å¤é—´éš”ï¼Œå¦‚ 'P1D'ï¼ˆæ¯å¤©ï¼‰ã€'PT1H'ï¼ˆæ¯å°æ—¶ï¼‰",
    "count": "integer, å¯é€‰ï¼Œæœ€å¤§é‡å¤æ¬¡æ•°ï¼Œnull è¡¨ç¤ºæ— é™"
  },
  "priority": "string, å¯é€‰ï¼Œä¼˜å…ˆçº§ï¼š'low', 'medium', 'high', 'urgent'",
  "context": {
    "source": "string, å¯é€‰ï¼Œä»»åŠ¡æ¥æºï¼Œå¦‚ 'user_input', 'system_event'",
    "related_goal": "string, å¯é€‰ï¼Œå…³è”çš„é•¿æœŸç›®æ ‡æˆ–è®¡åˆ’ ID"
  }
}


### è¿”å›

{
  "task_id": "reminder_salya_visit",
  "task_type": "reminder",
  "description": "æé†’ç”¨æˆ·æ˜å¤©å»åƒè¨è‰äºš",
  "trigger": {
    "type": "scheduled",
    "time": "2025-04-06T10:00:00",
    "timezone": "Asia/Shanghai"
  },
  "payload": {
    "action": "notify_user",
    "parameters": {
      "message": "ä»Šå¤©ä½ è®¡åˆ’å»åƒè¨è‰äºšï¼Œè®°å¾—å‡ºå‘å“¦ï¼"
    }
  },
  "priority": "medium",
  "context": {
    "source": "user_input",
    "related_goal": null
  }
}